<!DOCTYPE html>
<head>
<base href="/">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="res/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="res/bootstrap/css/bootstrap-responsive.min.css">
<link rel="stylesheet" type="text/css" href="res/media/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="res/media/css/glyphicons.css">
<link rel="stylesheet" type="text/css" href="res/media/css/style.css">
<link rel="stylesheet" type="text/css" href="res/media/css/style-metro.css">
<link rel="stylesheet" type="text/css" href="res/media/css/search.css">
<link rel="stylesheet" type="text/css" href="res/plugins/kindeditor/default/default.css">
<link rel="stylesheet" type="text/css" href="res/common/css/comm.css">

<script data-main="res/main.js" src="res/require.js" ></script>
</head>
<body class="page-header-fixed" ng-controller="ComCtrl">
<!--導航-->
<div id="navs" class="row-fluid">
	<div id="navs_area">
		<div class="left">
			<ul>
				<li>
					<a href="/">首 页</a>
				</li>
				<li >
					<a href="#">讨论区</a>
				</li>
				<li >
					<a href="#">博 客</a>
				</li>
			</ul>
		</div>
		<div class="right" ng-show="show">
			<ul>
				<li>
					<a data-toggle="modal" href="#login_modal">登 陆 </a>
				</li>
				<li >
					<a href="#/register" >注 册 </a>
				</li>
			</ul>
		</div>
		<div class="right" ng-show="!show">
			<ul>
				<li>
					{{user.name}} 
				</li>
				<li >
					<a href="#" ng-click="logout()" >退出 </a>
				</li>
			</ul>
		</div>
	</div>
	
</div>
<div class="content">
	<!--   內容區-->
	<div class="row-fluid" >
		<div class="search">
			<div class="input-append" style="margin-bottom:0px;">
				<input class="m-wrap" style="width:400px;" type="text" placeholder="Search Mail">
				<button class="btn green" type="button">搜 索 &nbsp; <i class="m-icon-swapright m-icon-white"></i></button>
			</div>
			<div class="right">
				<p>我要提问</p>
				<a href="#/topic" class="btn green">
					发 贴 &nbsp; <i class="icon-comments"></i>
				</a>
			</div>
		</div>
			
	</div>

	<div class="row-fluid">
		<div class="span12">
			<div class="alert alert-block alert-success fade in" style="margin:0px;padding:2px 4px;">今日:1234 | 昨日:123 | 帖子:22222 | 会员:9888 | 欢迎新会员:aaa</div>
			<!-- END PAGE TITLE & BREADCRUMB-->
		</div>
	</div>
	<div class="page-container" ng-view></div>
	
	<!--登陆-->
	<div id="login_modal" class="modal hide fade" tabindex="-1" data-width="760">

		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
			<h3>会员登陆</h3>

		</div>

		<div class="modal-body">

			<div class="row-fluid">
				<form class="form-horizontal" ng-submit="login();" novalidate="novalidate">
					<div class="control-group">
						<label class="control-label">
							邮箱:
							<span class="required">*</span>
						</label>
						<div class="controls">
							<input type="text" class="span6 m-wrap" ng-model="user.email" name="email">
							<span class="help-inline">邮箱地址</span>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">
							密码:
							<span class="required">*</span>
						</label>
						<div class="controls">
							<input type="text" class="span6 m-wrap" ng-model="user.password" name="password">
							<span class="help-inline">不少于5位字符</span>
						</div>

					</div>

					<div class="form-actions">
						<button type="submit" class="btn purple">登陆</button>
						<button type="button" data-dismiss="modal" class="btn">取消</button>

					</div>
				</form>
			</div>

		</div>

	</div>
</div>
<script type="text/javascript">
require([
		 'app'
],function(app){
	app.controller('ComCtrl',['$scope', '$http', function($scope,$http){
		$scope.show = true;
		$scope.user = {};
		$scope.login = function(){
			
			$http({method:'post',url:"login", params:$scope.user}).success(function(result){
				alert(result.msg);
				if(result.status == 1){
					$scope.show = false;
				}
			}).error(function(){
				alert("网络连接失败");
			});
			$("#login_modal").modal('hide');
		};
		$scope.logout = function(){
			$scope.show = true;
		}
	}]);
});
</script>
</body>